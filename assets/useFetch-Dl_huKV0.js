import{r}from"./index-I8JumXyi.js";function i(n,o=!0){const[l,t]=r.useState({data:null,loading:o,error:null}),c=r.useRef(n);r.useEffect(()=>{c.current=n},[n]);const u=r.useCallback(async()=>{var a,s;t(e=>({...e,loading:!0,error:null}));try{const e=await c.current();return t({data:e,loading:!1,error:null}),e}catch(e){const d=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message||"An error occurred";throw t({data:null,loading:!1,error:d}),e}},[]);r.useEffect(()=>{o&&u().catch(()=>{})},[u,o]);const f=r.useCallback(a=>{t(s=>({...s,data:a}))},[]);return{...l,execute:u,setData:f}}export{i as u};
