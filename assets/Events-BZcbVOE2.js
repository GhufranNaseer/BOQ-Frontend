import{r,j as e,S as h,L as j}from"./index-DLXa8zyf.js";import{e as b}from"./events.service-r7Bkl8Fg.js";import{L as N}from"./Layout-Co0fdUwk.js";import{u as y}from"./useFetch-yFRZITBE.js";import{f as w}from"./index-CmJUnWuT.js";const L=()=>{const{data:s,loading:f,error:i,execute:g,setData:p}=y(()=>b.getAll()),[l,o]=r.useState(""),[d,c]=r.useState(""),[n,x]=r.useState(""),[m,u]=r.useState(!1),v=async t=>{if(t.preventDefault(),!(!l||!n)){u(!0);try{const a=await b.create({name:l,description:d,eventDate:n});o(""),c(""),x(""),s&&p([a,...s])}catch{alert("Failed to create event")}finally{u(!1)}}};return e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border sticky top-24",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Create New Event"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Event Name"}),e.jsx("input",{type:"text",value:l,onChange:t=>o(t.target.value),required:!0,className:"w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50 focus:bg-white transition-all",placeholder:"e.g. Badar Expo 2026"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:n,onChange:t=>x(t.target.value),required:!0,className:"w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50 focus:bg-white transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:d,onChange:t=>c(t.target.value),rows:3,className:"w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50 focus:bg-white transition-all",placeholder:"Brief event details..."})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 disabled:bg-blue-300 transition shadow-lg shadow-blue-100",children:m?e.jsx(h,{size:"sm"}):"Create Event"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Active Events"}),e.jsx("button",{onClick:()=>g(),className:"text-blue-600 font-bold text-sm hover:underline",children:"Refresh"})]}),i&&e.jsx("div",{className:"m-6 p-4 bg-red-50 border border-red-100 text-red-600 rounded-xl text-sm font-medium",children:i}),e.jsx("div",{className:"divide-y",children:f&&!s?e.jsx("div",{className:"p-12",children:e.jsx(h,{})}):!s||s.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500 italic",children:"No events found. Create one to get started."}):s.map(t=>{var a;return e.jsx("div",{className:"p-6 hover:bg-blue-50/30 transition-colors group",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-extrabold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.name}),e.jsxs("span",{className:"bg-blue-50 text-blue-700 text-[10px] font-black px-2 py-0.5 rounded-full uppercase tracking-widest border border-blue-100",children:[((a=t._count)==null?void 0:a.tasks)||0," Tasks"]})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-500 mt-1 space-x-3",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),w(t.eventDate)]})}),e.jsx("p",{className:"text-gray-600 mt-3 text-sm leading-relaxed line-clamp-2 italic",children:t.description||"No description provided."})]}),e.jsx(j,{to:`/admin/events/${t.id}`,className:"ml-4 p-2 bg-gray-50 rounded-xl text-gray-400 hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},t.id)})})]})})]})})};export{L as default};
